name: Deploy and Notify

# Run this workflow whenever code is pushed to main
on:
  push:
    branches: [ main ]

jobs:
  deploy-and-notify:
    runs-on: ubuntu-latest

    steps:
      # 1. Check out the repository
      - name: Check out code
        uses: actions/checkout@v2

      # 2. (Optional) Install dependencies
      - name: Install dependencies
        run: npm install

      # 3. Run a "deployment" step (placeholder here)
      - name: Deploy Step
        run: echo "Deploying the app..."
      
      # 4. Notify Slack only if previous steps succeed
      - name: Send Slack notification
        if: success()
        run: |
          # Using cURL to post to Slack
          curl -X POST -H 'Content-type: application/json' \
            --data '{"text":"Deployment was successful :tada:"}' \
            $SLACK_WEBHOOK_URL
        env:
          SLACK_WEBHOOK_URL: "https://hooks.slack.com/services/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"
